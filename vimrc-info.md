# Vim キーマップまとめ（この `.vimrc` 用）

このページは、現在の `.vimrc` 設定で使えるキーマップを用途別にまとめたものです。  
Leader キーは `Space` です。

---

## 1. 基本情報

- Leader キー  
  - `let mapleader = " "`  
  - 以降の `<leader>` はすべて `<Space>` キーを指します。

---

## 2. LSP 関連（vim-lsp）

### 定義ジャンプ系

| モード | キー       | 動作                         |
|--------|------------|------------------------------|
| Normal | `gd`       | 定義へジャンプ               |
| Normal | `gy`       | 型の定義へジャンプ           |
| Normal | `gi`       | 実装へジャンプ               |
| Normal | `gr`       | 参照一覧へジャンプ           |
| Normal | `<Space>d` | 定義へジャンプ（Leader 版）  |
| Normal | `<Space>y` | 型定義へジャンプ（Leader 版）|
| Normal | `<Space>i` | 実装へジャンプ（Leader 版）  |
| Normal | `<Space>R` | 参照一覧（Leader 版）        |

### 診断・ドキュメント

| モード | キー | 動作                          |
|--------|------|-------------------------------|
| Normal | `[g` | 前の診断メッセージへ移動      |
| Normal | `]g` | 次の診断メッセージへ移動      |
| Normal | `K`  | カーソル位置の Hover（ヘルプ）|

---

## 3. Vimwiki

| モード | キー        | 動作                |
|--------|-------------|---------------------|
| Normal | `<Space>w`  | `:VimwikiIndex` を開く |

---

## 4. Terminal

| モード | キー        | 動作                |
|--------|-------------|---------------------|
| Normal | `<Space>t`  | `:terminal` を起動  |

---

## 5. FZF 連携

FZF 用の検索コマンドを Leader キーから呼び出せます。

| モード | キー         | 動作                      |
|--------|--------------|---------------------------|
| Normal | `<Space>ff`  | `:Files`（ファイル検索）  |
| Normal | `<Space>fg`  | `:GFiles`（Git 管理ファイル） |
| Normal | `<Space>fb`  | `:Buffers`（バッファ一覧）|
| Normal | `<Space>fl`  | `:Lines`（全バッファ行検索）|
| Normal | `<Space>fr`  | `:Rg`（ripgrep 検索）     |

---

## 6. 補完まわり（手動トリガ）

### 6-1. PUM 操作（補完メニュー表示中）

| モード  | キー       | 条件       | 動作                          |
|---------|------------|------------|-------------------------------|
| Insert  | `<Tab>`    | PUM 表示中 | 次の候補へ移動（`<C-n>`）     |
| Insert  | `<Tab>`    | それ以外   | 通常の Tab 入力               |
| Insert  | `<S-Tab>`  | PUM 表示中 | 前の候補へ移動（`<C-p>`）     |
| Insert  | `<S-Tab>`  | それ以外   | 通常の Shift+Tab 動作         |
| Insert  | `<CR>`     | PUM 表示中 | 候補確定（`<C-y>`）           |
| Insert  | `<CR>`     | それ以外   | 通常の改行                    |

### 6-2. 手動トリガ（LSP 補完）

| モード  | キー         | 動作                                  |
|---------|--------------|---------------------------------------|
| Insert  | `<C-Space>`  | `asyncomplete` による LSP 補完を起動 |

### 6-3. Vim 標準補完（マッピングではなく標準機能）

設定内で推奨されている標準キーです。

| モード  | キー            | 動作                       |
|---------|-----------------|----------------------------|
| Insert  | `<C-x><C-n>`    | バッファ内キーワード補完   |
| Insert  | `<C-x><C-f>`    | ファイルパス補完           |

---

## 7. クリップボード連携（OSC52）

ヤンク時のキーマップ自体はデフォルトのままですが、  
次の条件を満たすと、自動的にシステムクリップボードへもコピーされます。

- オペレーターが `y`（ヤンク）
- レジスタ指定なし（無名レジスタ `"`）
- `:OSCYankReg` コマンドが存在する（`vim-oscyank` 有効）

つまり、普段どおりの

- Normal モードで `yy`, `yw`, `yj`, `y$` など  
- Visual モードで `v` → 範囲選択 → `y`  

といった操作で、OSC52 経由のクリップボードコピーが行われます。

---

## 8. まとめ

- Leader は `<Space>`  
- LSP 操作は `gd/gy/gi/gr` と `<Space>d/y/i/R`  
- 快適な検索は `<Space>ff` など FZF 系  
- 補完はすべて手動で、  
  - `<C-Space>` で LSP 補完  
  - PUM が出ている時だけ `<Tab>/<S-Tab>/<CR>` で操作